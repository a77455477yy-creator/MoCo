<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>地理位置與感測器測試</title>
</head>
<body>
    <h1>地理位置服務測試</h1>
    <p>請開啟開發者工具 (F12) 的 **Console (主控台)** 頁籤查看輸出結果。</p>
    
    <script>
        // 檢查地理位置服務是否可用
        if ("geolocation" in navigator) {
            console.log("地理位置服務可用");
        } else {
            console.log("地理位置服務不可用");
        }

        // 取得當前位置
        // 注意：這裡取得位置成功後，會先輸出完整的 position 物件
        navigator.geolocation.getCurrentPosition(
            (position) => {
                console.log("位置取得成功:", position);
                // 執行 handlePosition 函式輸出緯度和經度
                handlePosition(position); 
            },
            (error) => {
                console.log("位置取得失敗:", error);
            }
        );

        // 請求感測器權限（部分瀏覽器需要）
        // 這段程式碼在背景執行，不影響地理位置取得
        async function requestSensorPermissions() {
            try {
                if (navigator.permissions) {
                    await navigator.permissions.query({ name: 'accelerometer' });
                    await navigator.permissions.query({ name: 'gyroscope' });
                }
            } catch (error) {
                console.log("權限請求可能不被支援");
            }
        }

        function handlePosition(position) {
            const coords = position.coords;

            console.log("緯度:", coords.latitude);
            console.log("經度:", coords.longitude);
        }

        // 呼叫感測器權限請求函式
        requestSensorPermissions();
    </script>
</body>
</html>