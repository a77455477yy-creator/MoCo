<!DOCTYPE html>

<html lang="zh-TW">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>è·¨åœ‹éŠæˆ² Ping æ¸¬è©¦ (å« API åœ°å€æŸ¥è©¢)</title>

Â  Â  <style>

Â  Â  Â  Â  body {Â 

Â  Â  Â  Â  Â  Â  background-color: #121212;Â 

Â  Â  Â  Â  Â  Â  color: #ffffff;Â 

Â  Â  Â  Â  Â  Â  font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif;Â 

Â  Â  Â  Â  Â  Â  padding: 20px;Â 

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  max-width: 600px;

Â  Â  Â  Â  Â  Â  margin: 0 auto;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .server-item {Â 

Â  Â  Â  Â  Â  Â  background: #1e1e1e;

Â  Â  Â  Â  Â  Â  border: 1px solid #333;Â 

Â  Â  Â  Â  Â  Â  margin: 10px 0;Â 

Â  Â  Â  Â  Â  Â  padding: 15px;Â 

Â  Â  Â  Â  Â  Â  border-radius: 8px;Â 

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  justify-content: space-between;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  }



Â  Â  Â  Â  .ping-result { color: #bb86fc; font-weight: bold; }



Â  Â  Â  Â  /* ç‹€æ…‹è³‡è¨Šå€å¡Š */

Â  Â  Â  Â  .status-box {

Â  Â  Â  Â  Â  Â  background-color: #2c2c2c;

Â  Â  Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  text-align: left;

Â  Â  Â  Â  Â  Â  font-size: 14px;

Â  Â  Â  Â  Â  Â  border: 1px solid #444;

Â  Â  Â  Â  }

Â  Â  Â  Â  .status-box p { margin: 5px 0; }

Â  Â  Â  Â  .highlight { color: #03dac6; font-weight: bold; }



Â  Â  Â  Â  #locationNote {

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  margin-bottom: 15px;

Â  Â  Â  Â  Â  Â  background-color: #1e1e1e;

Â  Â  Â  Â  Â  Â  color: #fff;

Â  Â  Â  Â  Â  Â  border: 1px solid #555;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  box-sizing: border-box;Â 

Â  Â  Â  Â  }

Â  Â  Â  Â  #locationNote::placeholder { color: #888; }



Â  Â  Â  Â  button {Â 

Â  Â  Â  Â  Â  Â  width: 100%;Â 

Â  Â  Â  Â  Â  Â  padding: 15px;Â 

Â  Â  Â  Â  Â  Â  font-size: 18px;Â 

Â  Â  Â  Â  Â  Â  background-color: #3700b3;Â 

Â  Â  Â  Â  Â  Â  color: white;Â 

Â  Â  Â  Â  Â  Â  border: none;Â 

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  transition: background 0.3s;

Â  Â  Â  Â  }

Â  Â  Â  Â  button:hover { background-color: #5600e8; }

Â  Â  Â  Â  button:disabled { background-color: #555; cursor: not-allowed; }



Â  Â  Â  Â  #jsonBox {

Â  Â  Â  Â  Â  Â  width: 100%; height: 200px;Â 

Â  Â  Â  Â  Â  Â  background: #000; color: #00ff00;

Â  Â  Â  Â  Â  Â  border: 1px solid #555;Â 

Â  Â  Â  Â  Â  Â  font-family: monospace;

Â  Â  Â  Â  Â  Â  text-align: left;

Â  Â  Â  Â  Â  Â  padding: 10px;

Â  Â  Â  Â  Â  Â  box-sizing: border-box;Â 

Â  Â  Â  Â  Â  Â  overflow-y: scroll;

Â  Â  Â  Â  Â  Â  font-size: 12px;

Â  Â  Â  Â  }

Â  Â  </style>

</head>

<body>



Â  Â  <h2>ğŸŒ è¨Šè™Ÿèˆ‡ Ping å¯¦æ¸¬ (API ä½œæ¥­ç‰ˆ)</h2>

Â  Â Â 

Â  Â  <div class="status-box">

Â  Â  Â  Â  <p>ğŸ“¡ ç¶“ç·¯åº¦: <span id="gpsInfo" class="highlight">ç­‰å¾…å•Ÿå‹•...</span></p>

Â  Â  Â  Â  <p>ğŸ“ API åœ°å€: <span id="addressInfo" class="highlight">ç­‰å¾…æŸ¥è©¢...</span></p>

Â  Â  </div>



Â  Â  <input type="text" id="locationNote" placeholder="å‚™è¨» (ä¾‹å¦‚: å­¸æ ¡åœ–æ›¸é¤¨ / 5Gè¨Šè™Ÿ)...">



Â  Â  <button id="btnStart" onclick="app.start()">ğŸš€ é–‹å§‹æ¸¬è©¦</button>



Â  Â  <div id="list">

Â  Â  Â  Â  <div class="server-item">ğŸ‡¹ğŸ‡¼ å°ç£ (TW) <span id="res-tw" class="ping-result">-- ms</span></div>

Â  Â  Â  Â  <div class="server-item">ğŸ‡¯ğŸ‡µ æ—¥æœ¬ (JP) <span id="res-jp" class="ping-result">-- ms</span></div>

Â  Â  Â  Â  <div class="server-item">ğŸ‡°ğŸ‡· éŸ“åœ‹ (KR) <span id="res-kr" class="ping-result">-- ms</span></div>

Â  Â  Â  Â  <div class="server-item">ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ (SG) <span id="res-sg" class="ping-result">-- ms</span></div>

Â  Â  Â  Â  <div class="server-item">ğŸ‡ºğŸ‡¸ ç¾åœ‹ (US) <span id="res-us" class="ping-result">-- ms</span></div>

Â  Â  </div>



Â  Â  <h3>ğŸ“Š æ¸¬è©¦å ±å‘Š (JSON)</h3>

Â  Â  <div id="jsonBox">ç­‰å¾…é–‹å§‹...</div>



Â  Â  <script>

Â  Â  Â  Â  'use strict';



Â  Â  Â  Â  const app = {

Â  Â  Â  Â  Â  Â  records: [],

Â  Â  Â  Â  Â  Â  servers: [

Â  Â  Â  Â  Â  Â  Â  Â  { id: 'tw', url: 'https://www.hinet.net' },

Â  Â  Â  Â  Â  Â  Â  Â  { id: 'jp', url: 'https://hnd-jp-ping.vultr.com' },

Â  Â  Â  Â  Â  Â  Â  Â  { id: 'kr', url: 'https://sel-kor-ping.vultr.com' },

Â  Â  Â  Â  Â  Â  Â  Â  { id: 'sg', url: 'https://sgp-ping.vultr.com' },

Â  Â  Â  Â  Â  Â  Â  Â  { id: 'us', url: 'https://lax-ca-us-ping.vultr.com' }

Â  Â  Â  Â  Â  Â  ],



Â  Â  Â  Â  Â  Â  start: function() {

Â  Â  Â  Â  Â  Â  Â  Â  // UI é–å®š

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('btnStart').disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('btnStart').innerText = "ğŸ›°ï¸ æ­£åœ¨å®šä½...";

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('gpsInfo').innerText = "å®šä½ä¸­...";

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('addressInfo').innerText = "æº–å‚™æŸ¥è©¢...";



Â  Â  Â  Â  Â  Â  Â  Â  // æ­¥é©Ÿ 1: å–å¾— GPS

Â  Â  Â  Â  Â  Â  Â  Â  this.getGPS().then(pos => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // æ­¥é©Ÿ 2: æ‹¿åˆ° GPS å¾Œï¼Œé–‹å§‹è·‘æ¸¬è©¦æµç¨‹

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.runTest(pos.lat, pos.lon);

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  },



Â  Â  Â  Â  Â  Â  // åŠŸèƒ½ 1: å–å¾—ç€è¦½å™¨ GPS

Â  Â  Â  Â  Â  Â  getGPS: function() {

Â  Â  Â  Â  Â  Â  Â  Â  return new Promise((resolve) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!navigator.geolocation) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("ä½ çš„ç€è¦½å™¨ä¸æ”¯æ´å®šä½");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve({ lat: 0, lon: 0 });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  navigator.geolocation.getCurrentPosition(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (position) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let lat = position.coords.latitude; // ç‚ºäº† API ç²¾æº–åº¦ï¼Œå…ˆä¸å–å°æ•¸é»

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let lon = position.coords.longitude;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // é¡¯ç¤ºåœ¨ç•«é¢ä¸Š (å–å°æ•¸é»å¾Œ 5 ä½æ¯”è¼ƒç¾è§€)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('gpsInfo').innerText = lat.toFixed(5) + ", " + lon.toFixed(5);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve({ lat: lat, lon: lon });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (error) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("GPS Error:", error);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('gpsInfo').innerText = "å®šä½å¤±æ•—";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve({ lat: 0, lon: 0 }); // å¤±æ•—é‚„æ˜¯ç¹¼çºŒè·‘ï¼Œåªæ˜¯åº§æ¨™æ˜¯ 0,0

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { timeout: 5000, enableHighAccuracy: true }Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  },



Â  Â  Â  Â  Â  Â  // åŠŸèƒ½ 2: ä¸²æ¥ OpenStreetMap API æŸ¥åœ°å€ (æœ¬æ¬¡ä½œæ¥­æ ¸å¿ƒ)

Â  Â  Â  Â  Â  Â  getAddress: async function(lat, lon) {

Â  Â  Â  Â  Â  Â  Â  Â  if (lat === 0 && lon === 0) return "ç„¡æ³•å®šä½ï¼Œç•¥éæŸ¥è©¢";



Â  Â  Â  Â  Â  Â  Â  Â  const url = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&zoom=18&addressdetails=1&accept-language=zh-TW`;

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(url); // ç™¼é€è«‹æ±‚

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json(); // è§£æ JSON

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return data.display_name; // å›å‚³åœ°å€å­—ä¸²

Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("API Error:", error);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return "API æŸ¥è©¢å¤±æ•— (å¯èƒ½æ˜¯ç¶²è·¯å•é¡Œ)";

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  },



Â  Â  Â  Â  Â  Â  // ä¸»æµç¨‹

Â  Â  Â  Â  Â  Â  runTest: async function(lat, lon) {

Â  Â  Â  Â  Â  Â  Â  Â  // --- éšæ®µä¸€ï¼šå‘¼å« API æŸ¥åœ°å€ ---

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('btnStart').innerText = "ğŸ” æ­£åœ¨æŸ¥è©¢åœ°å€ API...";

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // å‘¼å«ä¸Šé¢çš„ getAddress å‡½å¼

Â  Â  Â  Â  Â  Â  Â  Â  let addressResult = await this.getAddress(lat, lon);

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // æ›´æ–° UI é¡¯ç¤ºåœ°å€

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('addressInfo').innerText = addressResult;

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // è‡ªå‹•æŠŠåœ°å€å¡«å…¥å‚™è¨»æ¬„ (å¦‚æœä½¿ç”¨è€…æ²’å¡«å¯«)

Â  Â  Â  Â  Â  Â  Â  Â  let noteInput = document.getElementById('locationNote');

Â  Â  Â  Â  Â  Â  Â  Â  if (noteInput.value.trim() === "") {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  noteInput.value = addressResult;Â 

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  // --- éšæ®µäºŒï¼šPing æ¸¬é€Ÿ ---

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('btnStart').innerText = "âš¡ æ¸¬é€Ÿä¸­...";

Â  Â  Â  Â  Â  Â  Â  Â  let userNote = noteInput.value.trim();



Â  Â  Â  Â  Â  Â  Â  Â  // å»ºç«‹å ±å‘Šç‰©ä»¶

Â  Â  Â  Â  Â  Â  Â  Â  let report = {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  time: new Date().toLocaleString(),

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  location: { lat: lat, lon: lon },

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  address_from_api: addressResult, // è€å¸«è¦çœ‹çš„ API çµæœ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  user_note: userNote,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pings: {}

Â  Â  Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  Â  Â  // é€ä¸€æ¸¬è©¦ä¼ºæœå™¨

Â  Â  Â  Â  Â  Â  Â  Â  for (let server of this.servers) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('res-' + server.id).innerText = "...";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let ms = await this.ping(server.url);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('res-' + server.id).innerText = ms + " ms";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  report.pings[server.id] = ms;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  // --- éšæ®µä¸‰ï¼šå®Œæˆèˆ‡å„²å­˜ ---

Â  Â  Â  Â  Â  Â  Â  Â  this.records.push(report);

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // æ›´æ–° JSON é¡¯ç¤ºå€

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('jsonBox').innerText = JSON.stringify(this.records, null, 2);



Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('btnStart').disabled = false;

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('btnStart').innerText = "ğŸš€ å†æ¬¡æ¸¬è©¦";

Â  Â  Â  Â  Â  Â  },



Â  Â  Â  Â  Â  Â  // æ¸¬é€Ÿæ ¸å¿ƒåŠŸèƒ½

Â  Â  Â  Â  Â  Â  ping: async function(url) {

Â  Â  Â  Â  Â  Â  Â  Â  let startTime = Date.now();

Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await fetch(url + '?t=' + startTime, {Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mode: 'no-cors',Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cache: 'no-store'Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return Date.now() - startTime;

Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return -1;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  };

Â  Â  </script>

</body>

</html>
