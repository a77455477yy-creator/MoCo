<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çœŸå¯¦æ‰‹æ©Ÿç¶²è·¯è³‡è¨Šè®€å–</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h2 { margin-top: 0; color: #333; font-size: 18px; border-bottom: 2px solid #007bff; padding-bottom: 10px; display: inline-block;}
        .data-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
        .label { color: #666; font-weight: bold; }
        .value { color: #007bff; font-weight: bold; font-family: monospace; font-size: 1.1em; }
        .btn { background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 50px; font-size: 16px; cursor: pointer; width: 100%; margin-top: 10px; }
        .status { font-size: 12px; color: #888; text-align: center; margin-top: 10px; }
        .warning { background-color: #fff3cd; color: #856404; padding: 10px; border-radius: 5px; font-size: 12px; margin-bottom: 15px; border: 1px solid #ffeeba; }
    </style>
</head>
<body>

    <div class="warning">
        âš ï¸ <strong>æ³¨æ„ï¼š</strong> ä¸€èˆ¬ç€è¦½å™¨åŸºæ–¼å®‰å…¨é™åˆ¶ï¼Œç„¡æ³•è®€å– dBm (è¨Šè™Ÿå¼·åº¦) èˆ‡ Cell IDã€‚æ­¤ç¶²é å±•ç¤ºçš„æ˜¯ç€è¦½å™¨å…è¨±è®€å–çš„ã€ŒçœŸå¯¦ç¶²è·¯é€£ç·šç‹€æ…‹ã€ã€‚
    </div>

    <div class="card">
        <h2>ğŸ“¡ ç¶²è·¯é€£ç·šç‹€æ…‹ (Live)</h2>
        <div class="data-row">
            <span class="label">é€£ç·šé¡å‹:</span>
            <span class="value" id="netType">è®€å–ä¸­...</span>
        </div>
        <div class="data-row">
            <span class="label">æœ‰æ•ˆé »å¯¬é¡å‹:</span>
            <span class="value" id="effectType">è®€å–ä¸­...</span>
        </div>
        <div class="data-row">
            <span class="label">ä¸‹è¡Œé€Ÿåº¦ (ä¼°è¨ˆ):</span>
            <span class="value" id="downlink">è®€å–ä¸­...</span>
        </div>
        <div class="data-row">
            <span class="label">å¾€è¿”å»¶é² (RTT):</span>
            <span class="value" id="rtt">è®€å–ä¸­...</span>
        </div>
    </div>

    <div class="card">
        <h2>ğŸ“ ä½ çš„ä½ç½® (GPS)</h2>
        <div class="data-row">
            <span class="label">ç·¯åº¦:</span>
            <span class="value" id="lat">ç­‰å¾…æˆæ¬Š...</span>
        </div>
        <div class="data-row">
            <span class="label">ç¶“åº¦:</span>
            <span class="value" id="lon">ç­‰å¾…æˆæ¬Š...</span>
        </div>
        <div class="data-row">
            <span class="label">ç²¾ç¢ºåº¦:</span>
            <span class="value" id="acc">ç­‰å¾…æˆæ¬Š...</span>
        </div>
        <button class="btn" onclick="getLocation()">ğŸ”„ æ›´æ–° GPS ä½ç½®</button>
        <div class="status" id="geoStatus">è«‹é»æ“ŠæŒ‰éˆ•ç²å–ä½ç½®</div>
    </div>

    <script>
        function updateNetworkInfo() {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            
            if (connection) {
                // 1. ç¶²è·¯é¡å‹ (ä¾‹å¦‚: cellular, wifi)
                document.getElementById('netType').innerText = connection.type || 'æœªçŸ¥';
                
                // 2. æœ‰æ•ˆé¡å‹ (ä¾‹å¦‚: 4g, 3g)
                // é€™æ˜¯ä½ èµ°åˆ°è¨Šè™Ÿå·®çš„åœ°æ–¹å¯èƒ½æœƒè®ŠåŒ–çš„æ•¸å€¼
                document.getElementById('effectType').innerText = connection.effectiveType || 'æœªçŸ¥';
                
                // 3. ä¸‹è¡Œé€Ÿåº¦ (Mb/s)
                document.getElementById('downlink').innerText = (connection.downlink || 0) + ' Mbps';
                
                // 4. RTT (å»¶é²æ¯«ç§’) - è¨Šè™Ÿå·®æ™‚é€™å€‹æ•¸å€¼æœƒé£†é«˜
                document.getElementById('rtt').innerText = (connection.rtt || 0) + ' ms';
            } else {
                document.getElementById('netType').innerText = "ç€è¦½å™¨ä¸æ”¯æ´";
            }
        }

        // ç›£è½ç¶²è·¯è®ŠåŒ–ï¼šç•¶ä½ å¾ 4G åˆ‡åˆ° WiFiï¼Œæˆ–è¨Šè™Ÿè®Šå·®å°è‡´ 4G è®Š 3G æ™‚ï¼Œæœƒè‡ªå‹•æ›´æ–°
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        if (connection) {
            connection.addEventListener('change', updateNetworkInfo);
            updateNetworkInfo(); // åˆå§‹åŒ–åŸ·è¡Œä¸€æ¬¡
        }

        // GPS ä½ç½®ç²å–
        function getLocation() {
            const status = document.getElementById('geoStatus');
            
            if (!navigator.geolocation) {
                status.innerText = "æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´åœ°ç†ä½ç½®åŠŸèƒ½";
                return;
            }

            status.innerText = "æ­£åœ¨å®šä½ä¸­...";

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    document.getElementById('lat').innerText = position.coords.latitude.toFixed(5);
                    document.getElementById('lon').innerText = position.coords.longitude.toFixed(5);
                    document.getElementById('acc').innerText = "èª¤å·® " + position.coords.accuracy + " å…¬å°º";
                    status.innerText = "å®šä½æˆåŠŸ (æ›´æ–°æ™‚é–“: " + new Date().toLocaleTimeString() + ")";
                },
                (error) => {
                    status.innerText = "ç„¡æ³•ç²å–ä½ç½®: " + error.message;
                },
                {
                    enableHighAccuracy: true // è¦æ±‚é«˜ç²¾ç¢ºåº¦ (ä½¿ç”¨ GPS è€Œéåƒ…ç”¨åŸºåœ°å°å®šä½)
                }
            );
        }

        // é é¢è¼‰å…¥æ™‚å…ˆå˜—è©¦è®€å–ä¸€æ¬¡ç¶²è·¯
        updateNetworkInfo();
    </script>
</body>
</html>
